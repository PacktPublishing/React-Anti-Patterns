---
# Setup jest manually

## Installation and Configuration with TypeScript

Firstly, to install Jest, navigate to your project directory in your terminal and run:

```bash
npm install --save-dev jest
```

To use Jest with TypeScript, you need to install `ts-jest`, a TypeScript preprocessor with source map support for Jest. You'll also need `@types/jest` for TypeScript typings:

```bash
npm install --save-dev ts-jest @types/jest
```

## Note - source map

In the context of JavaScript and TypeScript, a source map is a file that maps from the transformed source (in this case, the JavaScript code generated by the TypeScript compiler) back to the original source code. This is particularly useful when you want to debug your original TypeScript code.

Without a source map, if you encounter an error in your runtime JavaScript code, the stack trace will refer to the compiled JavaScript code, not your original TypeScript code. This can make debugging difficult, since the code you're looking at and the code you wrote can be quite different, especially if transformations like minification or transpilation from TypeScript to JavaScript have occurred.

With source map support, the debugger can refer back to the original TypeScript code, so you can see the exact place in your TypeScript code where an error occurred. This makes debugging a lot easier.

---

## Note - type

The `@types/jest` package is a type declaration package that provides TypeScript definitions for the Jest testing framework.

When you're using TypeScript, the TypeScript compiler needs to know the types of all objects in your code to do its job properly. Most JavaScript libraries, including Jest, are not written in TypeScript, so the TypeScript compiler doesn't know what types to expect when you're using functions and objects from those libraries.

The `@types/jest` package is part of DefinitelyTyped, a large repository of TypeScript definition files for JavaScript libraries. By installing `@types/jest`, you're providing TypeScript with the necessary type information for the Jest library, so you can use Jest in your TypeScript code without type errors and with all the benefits of TypeScript's type checking and autocompletion.

---

Now you need to configure Jest to use `ts-jest` for `.ts` and `.tsx` files. In your `jest.config.js` file, or `jest` section of your `package.json`, set the `transform` option like this:

```javascript
{
  "jest": {
    "transform": {
      "^.+\\.tsx?$": "ts-jest"
    },
    "testRegex": "(/__tests__/.*|(\\.|/)(test|spec))\\.tsx?$",
    "moduleFileExtensions": ["ts", "tsx", "js", "jsx", "json", "node"]
  }
}
```

Sure, here's a breakdown of what each part of this Jest configuration does:

1. `"jest"`: This is the top-level configuration object for Jest in your `package.json`. All Jest settings go inside this object.

2. `"transform"`: This is an object that specifies how to transform source files before running the tests. The keys are regular expressions that match file paths, and the values are modules that do the transforming.

   - `"^.+\\.tsx?$": "ts-jest"`: This setting tells Jest to use the `ts-jest` preprocessor to transform any files that end with `.ts` or `.tsx` (the source files of TypeScript) before running the tests. The caret (`^`) matches the beginning of the string, the `.+` matches any characters except newline, the `\\.tsx?$` matches file names ending with `.ts` or `.tsx`, and the question mark (`?`) makes the `x` optional.

3. `"testRegex"`: This is a regular expression that Jest uses to detect test files. Any file that matches this regex is considered a test file.

   - `"(/__tests__/.*|(\\.|/)(test|spec))\\.tsx?$"`: This pattern matches any `.ts` or `.tsx` files in a `__tests__` directory, or any `.ts` or `.tsx` files elsewhere that have a filename ending with `.test` or `.spec`.

4. `"moduleFileExtensions"`: This is an array that lists all the file extensions that Jest will recognize. It is used when resolving modules.

   - `["ts", "tsx", "js", "jsx", "json", "node"]`: This setting tells Jest to recognize these file extensions. Typically, you would include the extensions of your source files (`ts`, `tsx` for TypeScript, `js`, `jsx` for JavaScript), as well as `json` for JSON files, and `node` for Node.js native modules.

---
